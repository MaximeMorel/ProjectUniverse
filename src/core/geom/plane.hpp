#ifndef __PLANE_HPP__
#define __PLANE_HPP__
////////////////////////////////////////////////////////////////////////////////
#include "core/math/vec3.hpp"
#include "core/math/vec4.hpp"
#include <ostream>
#include "core/log/logger.hpp"
////////////////////////////////////////////////////////////////////////////////
/// \brief Plane : form ax + by + xz + d = 0
////////////////////////////////////////////////////////////////////////////////
class Plane
{
public:
    ////////////////////////////////////////////////////////////////////////////
    /// \brief Build a Plane from coeffs
    /// \param a a coeff
    /// \param b b coeff
    /// \param c c coeff
    /// \param d d coeff
    ////////////////////////////////////////////////////////////////////////////
    Plane(double a, double b, double c, double d);

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Build a Plane from coeffs
    /// \param coeffs coeffs array (4 doubles)
    ////////////////////////////////////////////////////////////////////////////
    Plane(double *coeffs);

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Build a Plane from coeffs
    /// \param coeffs Vec4 of coeffs
    ////////////////////////////////////////////////////////////////////////////
    Plane(const Vec4& coeffs);

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Build a Plane from a point on the plane and plane normal
    /// \param point point on plane
    /// \param normal Plane normal
    ////////////////////////////////////////////////////////////////////////////
    Plane(const Vec3& point, const Vec3& normal);

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Build a Plane from 3 point3 on the plane
    /// \param point point on plane
    /// \param normal Plane normal
    ////////////////////////////////////////////////////////////////////////////
    Plane(const Vec3& a, const Vec3& b, const Vec3& c);

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Get Plane normal (from coeff a,b,c) not normalized
    /// \return Plane normal (Vec3(a,b,c))
    ////////////////////////////////////////////////////////////////////////////
    Vec3 getNormal() const;

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Compute the normalized plane
    /// \return Normalized plane
    ////////////////////////////////////////////////////////////////////////////
    Plane normalize() const;

    ////////////////////////////////////////////////////////////////////////////
    /// \brief Compute the memory usage of object in bytes
    /// \return Memory usage of object in bytes
    ////////////////////////////////////////////////////////////////////////////
    size_t getMemSize() const;

    static Vec3 intersect(const Plane& p0, const Plane& p1, const Plane& p2);

    friend std::ostream& operator<<(std::ostream& o, const Plane& plane);
    friend Logger& operator<<(Logger& o, const Plane& plane);

//private:
    Vec4 m_coeffs;  ///< Plane coeffs : a,b,c,d
};
////////////////////////////////////////////////////////////////////////////////
#endif // __PLANE_HPP__
