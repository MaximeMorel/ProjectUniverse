////////////////////////////////////////////////////////////////////////////////
#include "texture.hpp"
#include "core/log/logManager.hpp"
#include "renderManager.hpp"
#include "renderPlugin.hpp"
#include "core/resource/resourceManager.hpp"
////////////////////////////////////////////////////////////////////////////////
Texture::Texture(const std::string& name, const std::string& fileName)
    : ResourceFile(name, fileName)
    , m_textureId(0)
{

}
////////////////////////////////////////////////////////////////////////////////
Texture::~Texture()
{
    log().log() << __FUNCTION__ << ": " << *this << std::endl;
}
////////////////////////////////////////////////////////////////////////////////
TexturePtr Texture::create(const std::string& name, const std::string& fileName)
{
    TexturePtr tex = render().impl()->createTexture(name, fileName);
    if (!tex)
    {
        return nullptr;
    }

    ImageRGBAPtr im = res().createFromFile<ImageRGBA>(fileName);
    tex->setImage(im);

    return tex;
}
////////////////////////////////////////////////////////////////////////////////
uint32_t Texture::getTextureId() const
{
    return m_textureId;
}
////////////////////////////////////////////////////////////////////////////////
void Texture::bind()
{
}
////////////////////////////////////////////////////////////////////////////////
void Texture::unbind()
{
}
////////////////////////////////////////////////////////////////////////////////
void Texture::setImage(ImageRGBAPtr image)
{
    m_image = image;
}
////////////////////////////////////////////////////////////////////////////////
void Texture::printOn(Logger& o) const
{
    o << "Texture " << m_textureId << " " << getName();
}
////////////////////////////////////////////////////////////////////////////////
