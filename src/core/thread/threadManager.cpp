////////////////////////////////////////////////////////////////////////////////
#include "threadManager.hpp"
////////////////////////////////////////////////////////////////////////////////
ThreadManager* gThreads = nullptr;
////////////////////////////////////////////////////////////////////////////////
ThreadManager::ThreadManager()
    : m_threadUseId(0)
{
}
////////////////////////////////////////////////////////////////////////////////
ThreadManager::~ThreadManager()
{
    joinAll();
}
////////////////////////////////////////////////////////////////////////////////
std::thread& ThreadManager::getThread(int i)
{
    return m_thread[i];
}
////////////////////////////////////////////////////////////////////////////////
std::thread& ThreadManager::getNextThread()
{
    return m_thread[m_threadUseId++];
}
////////////////////////////////////////////////////////////////////////////////
void ThreadManager::joinAll()
{
    for (size_t i = 0; i < 8; ++i)
    {
    if (m_thread[i].joinable())
        m_thread[i].join();
    }
}
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
void setGlobalThreads(ThreadManager& threads)
{
    gThreads = &threads;
}
////////////////////////////////////////////////////////////////////////////////
ThreadManager& threads()
{
    return *gThreads;
}
////////////////////////////////////////////////////////////////////////////////
